<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Local photon instance — photon_local • photon</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Local photon instance — photon_local"><meta name="description" content="This R6 class is used to initialize and manage local photon instances.
It can download and setup the Java, the photon executable, and the necessary
Elasticsearch search index. It can start, stop, and query the status of the
photon instance. It is also the basis for geocoding requests at it is used
to retrieve the URL for geocoding."><meta property="og:description" content="This R6 class is used to initialize and manage local photon instances.
It can download and setup the Java, the photon executable, and the necessary
Elasticsearch search index. It can start, stop, and query the status of the
photon instance. It is also the basis for geocoding requests at it is used
to retrieve the URL for geocoding."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">photon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Overview</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-book"></span> Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/photon.html">Introduction to {photon}</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-search"></span> Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Local photon instance</h1>

      <div class="d-none name"><code>photon_local.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This R6 class is used to initialize and manage local photon instances.
It can download and setup the Java, the photon executable, and the necessary
Elasticsearch search index. It can start, stop, and query the status of the
photon instance. It is also the basis for geocoding requests at it is used
to retrieve the URL for geocoding.</p>
    </div>


    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="photon-package.html">photon::photon</a></code> -&gt; <code>photon_local</code></p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>path</code></dt>
<dd><p>Path to the directory where the photon instance is stored.</p></dd>


<dt><code>proc</code></dt>
<dd><p><code><a href="http://processx.r-lib.org/reference/process.html" class="external-link">process</a></code> object that handles the
external process running photon.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-photon_local-new"><code>photon_local$new()</code></a></p></li>
<li><p><a href="#method-photon_local-info"><code>photon_local$info()</code></a></p></li>
<li><p><a href="#method-photon_local-purge"><code>photon_local$purge()</code></a></p></li>
<li><p><a href="#method-photon_local-start"><code>photon_local$start()</code></a></p></li>
<li><p><a href="#method-photon_local-stop"><code>photon_local$stop()</code></a></p></li>
<li><p><a href="#method-photon_local-is_running"><code>photon_local$is_running()</code></a></p></li>
<li><p><a href="#method-photon_local-is_ready"><code>photon_local$is_ready()</code></a></p></li>
<li><p><a href="#method-photon_local-get_url"><code>photon_local$get_url()</code></a></p></li>
<li><p><a href="#method-photon_local-clone"><code>photon_local$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-photon_local-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialize a local photon instance. If necessary, downloads the photon
executable, the search index, and Java.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/photon_local.html">photon_local</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"./photon"</span>,</span>
<span>  photon_version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  country <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  exact <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>path</code></dt>
<dd><p>Path to a directory where the photon executable and data
should be stored. Defaults to a directory "photon" in the current
working directory.</p></dd>


<dt><code>photon_version</code></dt>
<dd><p>Version of photon to be used. A list of all
releases can be found here: <a href="https://github.com/komoot/photon/releases/" class="external-link">https://github.com/komoot/photon/releases/</a>.</p></dd>


<dt><code>country</code></dt>
<dd><p>Character string that can be identified by
<code><a href="https://vincentarelbundock.github.io/countrycode/reference/countryname.html" class="external-link">countryname</a></code> as a country. An extract for this
country will be downloaded. If <code>NULL</code>, downloads a global search index.</p></dd>


<dt><code>date</code></dt>
<dd><p>Character string or date-time object used to specify the creation
date of the search index. If <code>"latest"</code>, will download the file tagged
with "latest". If a character string, the value should be parseable by
<code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>. If <code>exact = FALSE</code>, the input value is
compared to all available dates and the closest date will be selected.
Otherwise, a file will be selected that exactly matches the input to
<code>date</code>.</p></dd>


<dt><code>exact</code></dt>
<dd><p>If <code>TRUE</code>, exactly matches the <code>date</code>. Otherwise,
selects the date with lowest difference to the <code>date</code> parameter.</p></dd>


<dt><code>quiet</code></dt>
<dd><p>If <code>TRUE</code>, suppresses all informative messages.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-photon_local-info"></a><div class="section">
<h3 id="method-info-">Method <code>info()</code><a class="anchor" aria-label="anchor" href="#method-info-"></a></h3>
<p>Retrieve metadata about the java and photon version used as well
as the country and creation date of the Eleasticsearch search index.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">info</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-purge"></a><div class="section">
<h3 id="method-purge-">Method <code>purge()</code><a class="anchor" aria-label="anchor" href="#method-purge-"></a></h3>
<p>Kill the photon process and remove the directory. Useful to get rid
of an instance entirely.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">purge</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-start"></a><div class="section">
<h3 id="method-start-">Method <code><a href="https://rdrr.io/r/stats/start.html" class="external-link">start()</a></code><a class="anchor" aria-label="anchor" href="#method-start-"></a></h3>
<p>Start a local instance of the Photon geocoder. Runs the jar executable
located in the instance directory.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span></span>
<span>  min_ram <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  max_ram <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  host <span class="op">=</span> <span class="st">"0.0.0.0"</span>,</span>
<span>  port <span class="op">=</span> <span class="st">"2322"</span>,</span>
<span>  ssl <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  java_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  photon_options <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>min_ram</code></dt>
<dd><p>Initial RAM to be allocated to the Java process
(<code>-Xms</code> flag).</p></dd>


<dt><code>max_ram</code></dt>
<dd><p>Maximum RAM to be allocated to the Java process
(<code>-Xmx</code> flag)</p></dd>


<dt><code>host</code></dt>
<dd><p>Character string of the host name that the geocoder should
be opened on.</p></dd>


<dt><code>port</code></dt>
<dd><p>Port that the geocoder should listen to.</p></dd>


<dt><code>ssl</code></dt>
<dd><p>If <code>TRUE</code>, uses <code>https</code>, otherwise <code>http</code>.
Defaults to <code>FALSE</code>.</p></dd>


<dt><code>java_options</code></dt>
<dd><p>List of further flags passed on to the <code>java</code>
command.</p></dd>


<dt><code>photon_options</code></dt>
<dd><p>List of further flags passed on to the photon
jar in the java command.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-photon_local-stop"></a><div class="section">
<h3 id="method-stop-">Method <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code><a class="anchor" aria-label="anchor" href="#method-stop-"></a></h3>
<p>Kills the running photon process.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-is_running"></a><div class="section">
<h3 id="method-is-running-">Method <code>is_running()</code><a class="anchor" aria-label="anchor" href="#method-is-running-"></a></h3>
<p>Checks whether the photon instance is running and ready. The difference
to <code>$is_ready()</code> is that <code>$is_running()</code> checks specifically
if the running photon instance is managed by a process from its own
<code>photon</code> object. In other words, <code>$is_running()</code> returns
<code>TRUE</code> if both <code>$proc$is_alive()</code> and <code>$is_ready()</code>
return <code>TRUE</code>. This method is useful if you want to ensure that
the <code>photon</code> object can control its photon server (mostly internal
use).</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">is_running</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-is_ready"></a><div class="section">
<h3 id="method-is-ready-">Method <code>is_ready()</code><a class="anchor" aria-label="anchor" href="#method-is-ready-"></a></h3>
<p>Checks whether the photon instance is ready to take requests. This
is the case if the photon server returns a HTTP 400 when sending a
queryless request. This method is useful if you want to check whether
you can send requests.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">is_ready</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-get_url"></a><div class="section">
<h3 id="method-get-url-">Method <code>get_url()</code><a class="anchor" aria-label="anchor" href="#method-get-url-"></a></h3>
<p>Constructs the URL that geocoding requests should be sent to.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">get_url</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-photon_local-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">photon_local</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># start a new instance using a Monaco extract</span></span></span>
<span class="r-in"><span><span class="va">photon</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_photon.html">new_photon</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, country <span class="op">=</span> <span class="st">"Monaco"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># start a new instance with an older photon version</span></span></span>
<span class="r-in"><span><span class="va">photon</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_photon.html">new_photon</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, photon_version <span class="op">=</span> <span class="st">"0.4.1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># start a new instance with a specific java version</span></span></span>
<span class="r-in"><span><span class="va">photon</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_photon.html">new_photon</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, java_version <span class="op">=</span> <span class="fl">17</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

